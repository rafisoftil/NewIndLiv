@model IEnumerable<ProductViewModel>   
<!--=====================================
              SINGLE BANNER PART START
    =======================================-->
<section class="single-banner dashboard-banner">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="single-content">
                    <h2>bookmark</h2>
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">bookmark</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</section>
<!--=====================================
          SINGLE BANNER PART END
=======================================-->
<!--=====================================
        DASHBOARD HEADER PART START
=======================================-->
<section class="dash-header-part">
    <div class="container">
        <div class="dash-header-card">
            <partial name="~/Views/Shared/_ProfileCard.cshtml" />
            <div class="row">
                <div class="col-lg-12">
                    <div class="dash-menu-list">
                        <ul>
                            <li><a asp-controller="User" asp-action="Dashboard">Dashboard</a></li>
                            <li><a asp-controller="User" asp-action="Profile">Profile</a></li>
                            <li><a asp-controller="User" asp-action="PostAd">Ad Post</a></li>
                            <li><a asp-controller="User" asp-action="MyAds">my ads</a></li>
                            <li><a asp-controller="User" asp-action="Settings">settings</a></li>
                            <li><a asp-controller="User" class="active" asp-action="Bookmark">bookmarks</a></li>
                            <li><a asp-controller="User" asp-action="Message">message</a></li>
                            <li><a asp-controller="User" asp-action="Notification">notification</a></li>
                            <li><a asp-controller="Dashboard" asp-action="Logout">logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!--=====================================
        DASHBOARD HEADER PART END
=======================================-->
@if (Model.Count() > 0) {
    <!--=====================================
                BOOKMARK PART START
    =======================================-->
    <section class="bookmark-part">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="header-filter">
                        <div class="filter-show">
                            <label class="filter-label">Show :</label>
                            <select class="custom-select filter-select">
                                <option value="1">12</option>
                                <option value="2">24</option>
                                <option value="3">36</option>
                            </select>
                        </div>
                        <div class="filter-short">
                            <label class="filter-label">Short by :</label>
                            <select class="custom-select filter-select">
                                <option selected>all ads</option>
                                <option value="3">booking ads</option>
                                <option value="2">rental ads</option>
                                <option value="1">sale ads</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                @foreach (var wishlist in Model)
                {
                    <div class="col-sm-6 col-md-6 col-lg-4 col-xl-3">
                        <div class="product-card">
                            <div class="product-media">
                                <div class="product-img">
                                    <img src="~/images/loading-placeholder.png" onclick="loadImage(this, '@wishlist.productId')" onerror="this.onerror=null; this.src='/images/white-screen.jpg';" alt="@wishlist.productImageName" width="288" height="205" />
                                </div>
                                <div class="cross-vertical-badge product-badge">
                                    <i class="fas fa-fire"></i>
                                    <span>top niche</span>
                                </div>
                                <div class="product-type">
                                    <span class="flat-badge booking">sale</span>
                                </div>
                                <ul class="product-action">
                                    <li class="view"><i class="fas fa-eye"></i><span>264</span></li>
                                    <li class="click"><i class="fas fa-mouse"></i><span>134</span></li>
                                    <li class="rating"><i class="fas fa-star"></i><span>4.5/7</span></li>
                                </ul>
                            </div>
                            <div class="product-content">
                                <ol class="breadcrumb product-category">
                                    <li><i class="fas fa-tags"></i></li>
                                    <li class="breadcrumb-item"><a href="#">@wishlist.productName</a></li>
                                    <li class="breadcrumb-item active" aria-current="page">@wishlist.productAdCategory</li>
                                </ol>
                                <h5 class="product-title">
                                    <a href="#">@wishlist.productDescription</a>
                                </h5>
                                <div class="product-meta">
                                    <span><i class="fas fa-map-marker-alt"></i>Uttara, Dhaka</span>
                                    <span><i class="fas fa-clock"></i>30 min ago</span>
                                </div>
                                <div class="product-info">
                                    <h5 class="product-price">@wishlist.productPrice<span>/per week</span></h5>
                                    <div class="product-btn">
                                        <a href="compare.html" title="Compare" class="fas fa-compress"></a>
                                        @* <button type="button" title="Wishlist" class="fas fa-heart"></button> *@
                                        <button type="button" title="Wishlist" class="fas fa-heart" onclick="UpdateWishlist(this, '@wishlist.productId', '@wishlist.createdBy')"></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
                <div class="row">
                    <div class="col-lg-12">
                        <div class="footer-pagection">
                            <p class="page-info">Showing 12 of 60 Results</p>
                            <ul class="pagination">
                                <li class="page-item">
                                    <a class="page-link" href="#">
                                        <i class="fas fa-long-arrow-alt-left"></i>
                                    </a>
                                </li>
                                <li class="page-item"><a class="page-link active" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item">...</li>
                                <li class="page-item"><a class="page-link" href="#">67</a></li>
                                <li class="page-item">
                                    <a class="page-link" href="#">
                                        <i class="fas fa-long-arrow-alt-right"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
    </section>
    <!--=====================================
                BOOKMARK PART END
    =======================================-->
}
else {
    <div class="text-center m-5">
        <h3>Your Wishlist is Empty</h3>
    </div>
}
<div id="spinner" class="d-none">
    <img style="height: 100px" src="~/images/spinner.gif" />
</div>
<!--=====================================
          CURRENCY MODAL PART START
=======================================-->
<div class="modal fade" id="currency">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Choose a Currency</h4>
                <button class="fas fa-times" data-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <button class="modal-link active">United States Doller (USD) - $</button>
                <button class="modal-link">Euro (EUR) - €</button>
                <button class="modal-link">British Pound (GBP) - £</button>
                <button class="modal-link">Australian Dollar (AUD) - A$</button>
                <button class="modal-link">Canadian Dollar (CAD) - C$</button>
            </div>
        </div>
    </div>
</div>
<!--=====================================
          CURRENCY MODAL PART END
=======================================-->
<!--=====================================
          LANGUAGE MODAL PART END
=======================================-->
<div class="modal fade" id="language">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Choose a Language</h4>
                <button class="fas fa-times" data-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <button class="modal-link active">English</button>
                <button class="modal-link">bangali</button>
                <button class="modal-link">arabic</button>
                <button class="modal-link">germany</button>
                <button class="modal-link">spanish</button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

    function UpdateWishlist(button, productID, createdBy) {

        button.classList.replace("fas", "far");
        $.ajax({
            url: '/User/UpdateBookmarks',
            type: 'POST',
            data: { productID: productID, createdBy: createdBy, status: 0},
            success: function (response) {
                if (response.statusCode == 200) {
                    window.location.href = '@Url.Action("Bookmark", "User")';
                } else {

                }
            },
            error: function () {
                alert('Error in processing request.');
            }
        });
    }
    
    function loadImage(image, productId) {  

        alert(productId);
        image.attr("src", "/images/spinner.gif");
        image.width("20px");

        $.ajax({
            url: '/Dashboard/GetImageDetails',
            type: 'GET',
            data: { productid: productId },
            success: function (response) {
                if (response.image) {
                    image.attr("src", "data:image/jpeg;base64," + response.image); // Set image to base64
                    image.width("300px");
                } else {
                    image.attr("src", "/images/no-image.jpg"); // Fallback if no image found
                }
            },
            error: function () {
                image.attr("src", "/images/error.jpg"); // Fallback if API call fails
            }
        });
    }
</script>