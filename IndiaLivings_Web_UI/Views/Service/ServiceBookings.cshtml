@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewBag.Title = "Service Bookings";
    <link rel="icon" href="images/favicon.png">

    <!-- FONTS -->
    <link rel="stylesheet" href="fonts/flaticon/flaticon.css">
    <link rel="stylesheet" href="fonts/font-awesome/fontawesome.css">

    <!-- VENDOR -->
    <link rel="stylesheet" href="css/vendor/bootstrap.min.css">

    <!-- CUSTOM -->
    <link rel="stylesheet" href="css/custom/main.css">
    <link rel="stylesheet" href="css/custom/dashboard.css">
    <link rel="stylesheet" href="css/custom/services.css">
}
<section class="single-banner admin-banner">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="single-content">
                    <h2>Bookings Management</h2>
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="admin-dashboard.html">Admin</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Bookings Management</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="admin-bookings-part">
    <div class="container">
        <!-- Bookings Statistics -->
        <div class="row">
            <div class="col-lg-3 col-sm-6">
                <div class="admin-stat-card">
                    <div class="stat-content">
                        <h4>156</h4>
                        <p>Total Bookings</p>
                    </div>
                    <div class="stat-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-6">
                <div class="admin-stat-card">
                    <div class="stat-content">
                        <h4>23</h4>
                        <p>Pending Assignment</p>
                    </div>
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-6">
                <div class="admin-stat-card">
                    <div class="stat-content">
                        <h4>89</h4>
                        <p>Active Bookings</p>
                    </div>
                    <div class="stat-icon">
                        <i class="fas fa-user-check"></i>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-6">
                <div class="admin-stat-card">
                    <div class="stat-content">
                        <h4>?1,24,560</h4>
                        <p>Total Revenue</p>
                    </div>
                    <div class="stat-icon">
                        <i class="fas fa-rupee-sign"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bookings Management Content -->
        <div class="row">
            <div class="col-lg-12">
                <div class="admin-content-card">
                    <!-- Tab Navigation -->
                    <div class="admin-tabs">
                        <ul class="nav nav-tabs" id="bookingsTabs">
                            <li class="nav-item">
                                <a class="nav-link active" id="pending-tab" data-toggle="tab" href="#pending-bookings">Pending Assignment</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="assigned-tab" data-toggle="tab" href="#assigned-bookings">Assigned</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="completed-tab" data-toggle="tab" href="#completed-bookings">Completed</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="all-tab" data-toggle="tab" href="#all-bookings">All Bookings</a>
                            </li>
                        </ul>
                    </div>

                    <!-- Tab Content -->
                    <div class="tab-content" id="bookingsTabContent">
                        <!-- Pending Assignment Tab -->
                        <div class="tab-pane fade show active" id="pending-bookings">
                            <div class="content-header">
                                <h4>Pending Assignment (23)</h4>
                                <div class="content-actions">
                                    <select class="form-control form-control-sm" style="width: auto;">
                                        <option>All Categories</option>
                                        <option>Home Cleaning</option>
                                        <option>Beauty & Salon</option>
                                        <option>AC & Appliance</option>
                                        <option>Home Repair</option>
                                    </select>
                                </div>
                            </div>

                            <div class="bookings-list">
                                <!-- Booking Item 1 -->
                                <div class="booking-item">
                                    <div class="booking-header">
                                        <div class="booking-info">
                                            <div class="booking-id">
                                                <h6>Booking #BK001</h6>
                                                <span class="status-badge status-pending">Pending Assignment</span>
                                            </div>
                                            <div class="booking-customer">
                                                <img src="images/avatar/01.jpg" alt="customer">
                                                <div>
                                                    <h6>John Smith</h6>
                                                    <small>+91 9876543210</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="booking-date">
                                            <small>Booked: Dec 24, 2023</small>
                                        </div>
                                    </div>

                                    <div class="booking-details">
                                        <div class="detail-item">
                                            <h6>Service</h6>
                                            <p>Deep House Cleaning</p>
                                            <small>Home Cleaning Category</small>
                                        </div>
                                        <div class="detail-item">
                                            <h6>Scheduled Date & Time</h6>
                                            <p>Dec 26, 2023</p>
                                            <small>10:00 AM - 2:00 PM</small>
                                        </div>
                                        <div class="detail-item">
                                            <h6>Service Address</h6>
                                            <p>123 Main Street, Downtown</p>
                                            <small>Mumbai, Maharashtra - 400001</small>
                                        </div>
                                    </div>

                                    <div class="booking-details">
                                        <div class="detail-item">
                                            <h6>Service Amount</h6>
                                            <p>?1,299</p>
                                        </div>
                                        <div class="detail-item">
                                            <h6>Payment Status</h6>
                                            <p><span class="badge badge-success">Paid</span></p>
                                        </div>
                                        <div class="detail-item">
                                            <h6>Special Instructions</h6>
                                            <p>Please bring eco-friendly cleaning products</p>
                                        </div>
                                    </div>

                                    <div class="provider-assignment">
                                        <h6>Assign Service Provider</h6>
                                        <div class="available-providers" id="providers-bk001">
                                            <div class="provider-card" onclick="selectProvider('bk001', 'prov1')">
                                                <div class="provider-details">
                                                    <img src="images/avatar/01.jpg" alt="provider">
                                                    <div>
                                                        <strong>Clean Pro Services</strong>
                                                        <div class="provider-stats">
                                                            <span>? 4.8 (245 reviews)</span>
                                                            <span>?? 2.5 km away</span>
                                                            <span>? Available</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="provider-card" onclick="selectProvider('bk001', 'prov2')">
                                                <div class="provider-details">
                                                    <img src="images/avatar/02.jpg" alt="provider">
                                                    <div>
                                                        <strong>Home Care Plus</strong>
                                                        <div class="provider-stats">
                                                            <span>? 4.6 (189 reviews)</span>
                                                            <span>?? 3.8 km away</span>
                                                            <span>? Available</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="booking-actions">
                                            <button class="btn btn-success btn-sm" onclick="assignProvider('bk001')">
                                                <i class="fas fa-user-check"></i> Assign Selected Provider
                                            </button>
                                            <button class="btn btn-outline-primary btn-sm" onclick="viewBookingDetails('bk001')">
                                                <i class="fas fa-eye"></i> View Details
                                            </button>
                                            <button class="btn btn-outline-danger btn-sm" onclick="cancelBooking('bk001')">
                                                <i class="fas fa-times"></i> Cancel Booking
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Booking Item 2 -->
                                <div class="booking-item">
                                    <div class="booking-header">
                                        <div class="booking-info">
                                            <div class="booking-id">
                                                <h6>Booking #BK002</h6>
                                                <span class="status-badge status-pending">Pending Assignment</span>
                                            </div>
                                            <div class="booking-customer">
                                                <img src="images/avatar/03.jpg" alt="customer">
                                                <div>
                                                    <h6>Sarah Wilson</h6>
                                                    <small>+91 9876543211</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="booking-date">
                                            <small>Booked: Dec 24, 2023</small>
                                        </div>
                                    </div>

                                    <div class="booking-details">
                                        <div class="detail-item">
                                            <h6>Service</h6>
                                            <p>AC Repair & Service</p>
                                            <small>AC & Appliance Category</small>
                                        </div>
                                        <div class="detail-item">
                                            <h6>Scheduled Date & Time</h6>
                                            <p>Dec 27, 2023</p>
                                            <small>2:00 PM - 5:00 PM</small>
                                        </div>
                                        <div class="detail-item">
                                            <h6>Service Address</h6>
                                            <p>456 Park Avenue, Suburb</p>
                                            <small>Delhi, Delhi - 110001</small>
                                        </div>
                                    </div>

                                    <div class="booking-details">
                                        <div class="detail-item">
                                            <h6>Service Amount</h6>
                                            <p>?799</p>
                                        </div>
                                        <div class="detail-item">
                                            <h6>Payment Status</h6>
                                            <p><span class="badge badge-success">Paid</span></p>
                                        </div>
                                        <div class="detail-item">
                                            <h6>Special Instructions</h6>
                                            <p>AC not cooling properly, possible gas leak</p>
                                        </div>
                                    </div>

                                    <div class="provider-assignment">
                                        <h6>Assign Service Provider</h6>
                                        <div class="available-providers" id="providers-bk002">
                                            <div class="provider-card" onclick="selectProvider('bk002', 'prov3')">
                                                <div class="provider-details">
                                                    <img src="images/avatar/04.jpg" alt="provider">
                                                    <div>
                                                        <strong>Cool Tech Services</strong>
                                                        <div class="provider-stats">
                                                            <span>? 4.5 (156 reviews)</span>
                                                            <span>?? 1.2 km away</span>
                                                            <span>? Available</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="provider-card" onclick="selectProvider('bk002', 'prov4')">
                                                <div class="provider-details">
                                                    <img src="images/avatar/01.jpg" alt="provider">
                                                    <div>
                                                        <strong>AC Expert Hub</strong>
                                                        <div class="provider-stats">
                                                            <span>? 4.7 (198 reviews)</span>
                                                            <span>?? 2.8 km away</span>
                                                            <span>? Busy until 6 PM</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="booking-actions">
                                            <button class="btn btn-success btn-sm" onclick="assignProvider('bk002')">
                                                <i class="fas fa-user-check"></i> Assign Selected Provider
                                            </button>
                                            <button class="btn btn-outline-primary btn-sm" onclick="viewBookingDetails('bk002')">
                                                <i class="fas fa-eye"></i> View Details
                                            </button>
                                            <button class="btn btn-outline-danger btn-sm" onclick="cancelBooking('bk002')">
                                                <i class="fas fa-times"></i> Cancel Booking
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Assigned Bookings Tab -->
                        <div class="tab-pane fade" id="assigned-bookings">
                            <div class="content-header">
                                <h4>Assigned Bookings (89)</h4>
                                <div class="content-actions">
                                    <button class="btn btn-outline-secondary btn-sm">
                                        <i class="fas fa-download"></i> Export
                                    </button>
                                </div>
                            </div>

                            <div class="table-responsive">
                                <table class="table table-striped" id="assignedBookingsTable">
                                    <thead>
                                        <tr>
                                            <th>Booking ID</th>
                                            <th>Customer</th>
                                            <th>Service</th>
                                            <th>Provider</th>
                                            <th>Scheduled Date</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>#BK003</td>
                                            <td>
                                                <div class="customer-info">
                                                    <img src="images/avatar/02.jpg" alt="customer" class="table-avatar">
                                                    <span>Mike Johnson</span>
                                                </div>
                                            </td>
                                            <td>Hair Cut & Styling</td>
                                            <td>Bella Beauty</td>
                                            <td>Dec 25, 2023<br><small>6:00 PM</small></td>
                                            <td>?899</td>
                                            <td><span class="status-badge status-assigned">Assigned</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary" onclick="viewBookingDetails('BK003')">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-warning" onclick="reassignProvider('BK003')">
                                                        <i class="fas fa-user-edit"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Completed Bookings Tab -->
                        <div class="tab-pane fade" id="completed-bookings">
                            <div class="content-header">
                                <h4>Completed Bookings (44)</h4>
                            </div>

                            <div class="table-responsive">
                                <table class="table table-striped" id="completedBookingsTable">
                                    <thead>
                                        <tr>
                                            <th>Booking ID</th>
                                            <th>Customer</th>
                                            <th>Service</th>
                                            <th>Provider</th>
                                            <th>Completed Date</th>
                                            <th>Amount</th>
                                            <th>Rating</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>#BK005</td>
                                            <td>
                                                <div class="customer-info">
                                                    <img src="images/avatar/01.jpg" alt="customer" class="table-avatar">
                                                    <span>David Lee</span>
                                                </div>
                                            </td>
                                            <td>Plumbing Repair</td>
                                            <td>Fix It Fast</td>
                                            <td>Dec 22, 2023</td>
                                            <td>?649</td>
                                            <td>
                                                <div class="rating">
                                                    <i class="fas fa-star"></i>
                                                    <span>4.5</span>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary" onclick="viewBookingDetails('BK005')">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary" onclick="generateInvoice('BK005')">
                                                        <i class="fas fa-file-pdf"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- All Bookings Tab -->
                        <div class="tab-pane fade" id="all-bookings">
                            <div class="content-header">
                                <h4>All Bookings (156)</h4>
                                <div class="content-actions">
                                    <input type="text" class="form-control form-control-sm" placeholder="Search bookings..." style="width: 200px; display: inline-block;">
                                    <button class="btn btn-outline-secondary btn-sm">
                                        <i class="fas fa-download"></i> Export All
                                    </button>
                                </div>
                            </div>

                            <div class="table-responsive">
                                <table class="table table-striped" id="allBookingsTable">
                                    <thead>
                                        <tr>
                                            <th>Booking ID</th>
                                            <th>Customer</th>
                                            <th>Service</th>
                                            <th>Provider</th>
                                            <th>Date</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>#BK001</td>
                                            <td>John Smith</td>
                                            <td>Deep House Cleaning</td>
                                            <td>-</td>
                                            <td>Dec 26, 2023</td>
                                            <td>?1,299</td>
                                            <td><span class="status-badge status-pending">Pending</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary" onclick="viewBookingDetails('BK001')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>#BK003</td>
                                            <td>Mike Johnson</td>
                                            <td>Hair Cut & Styling</td>
                                            <td>Bella Beauty</td>
                                            <td>Dec 25, 2023</td>
                                            <td>?899</td>
                                            <td><span class="status-badge status-assigned">Assigned</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary" onclick="viewBookingDetails('BK003')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>#BK005</td>
                                            <td>David Lee</td>
                                            <td>Plumbing Repair</td>
                                            <td>Fix It Fast</td>
                                            <td>Dec 22, 2023</td>
                                            <td>?649</td>
                                            <td><span class="status-badge status-completed">Completed</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary" onclick="viewBookingDetails('BK005')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!--=====================================
        ADMIN BOOKINGS MANAGEMENT END
=======================================-->
<!--=====================================
            JS LINK PART START
=======================================-->
<!-- VENDOR -->
<script src="js/vendor/jquery-1.12.4.min.js"></script>
<script src="js/vendor/popper.min.js"></script>
<script src="js/vendor/bootstrap.min.js"></script>

<!-- CUSTOM -->
<script src="js/custom/main.js"></script>
<script>
    // Booking Management Functions
    function selectProvider(bookingId, providerId) {
        // Remove selection from all providers for this booking
        $('#providers-' + bookingId + ' .provider-card').removeClass('selected');

        // Add selection to clicked provider
        event.currentTarget.classList.add('selected');

        // Store selected provider
        window.selectedProviders = window.selectedProviders || {};
        window.selectedProviders[bookingId] = providerId;
    }

    function assignProvider(bookingId) {
        const selectedProvider = window.selectedProviders && window.selectedProviders[bookingId];
        if (!selectedProvider) {
            alert('Please select a service provider first');
            return;
        }

        if (confirm('Are you sure you want to assign this provider to the booking?')) {
            alert('Provider assigned successfully! Customer and provider will be notified.');
            // Handle provider assignment
        }
    }

    function viewBookingDetails(bookingId) {
        alert('Opening detailed view for booking: ' + bookingId);
        // Open booking details modal
    }

    function cancelBooking(bookingId) {
        if (confirm('Are you sure you want to cancel this booking? This action cannot be undone.')) {
            alert('Booking cancelled. Customer will be notified and refund will be processed.');
            // Handle booking cancellation
        }
    }

    function reassignProvider(bookingId) {
        alert('Opening provider reassignment for booking: ' + bookingId);
        // Open reassignment modal
    }

    function generateInvoice(bookingId) {
        alert('Generating invoice for booking: ' + bookingId);
        // Generate PDF invoice
    }

    // Auto-refresh bookings every 30 seconds
    setInterval(function() {
        console.log('Refreshing bookings data...');
    }, 30000);
</script>