@model CompanySetupViewModel
<footer class="footer-part">
    <div class="container">
        <div class="row newsletter">
            <div class="col-lg-6">
                <div class="news-content">
                    <h2>Subscribe for Latest Offers</h2>
                    <p>Stay updated with the latest deals, exclusive offers, and new listings. Subscribe to our newsletter and never miss an opportunity tailored just for you.</p>
                </div>
            </div>
            <div class="col-lg-6">
                <form class="news-form" id="newsForm">
                    <input type="text" id="subscriptionEmail" placeholder="Enter Your Email Address" oninput="hideEmailError()">
                    <small id="emailError" style="display: none; color: red"></small>
                    <button type="submit" class="btn btn-inline">
                        <i class="fas fa-envelope"></i>
                        <span>Subscribe</span>
                    </button>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6 col-md-6 col-lg-3">
                <div class="footer-content">
                    <h3>Contact Us</h3>
                    <ul class="footer-address">
                        <li>
                            <i class="fas fa-map-marker-alt"></i>
                            <p>@Model.address <span>@Model.city, @Model.state, @Model.country</span></p>
                        </li>
                        <li>
                            <i class="fas fa-envelope"></i>
                            <p>@Model.email<span></span></p>
                        </li>
                        <li>
                            <i class="fas fa-phone-alt"></i>
                            <p>@Model.phone <span></span></p>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-sm-6 col-md-6 col-lg-3">
                <div class="footer-content">
                    <h3>Quick Links</h3>
                    <ul class="footer-widget">
                        @* <li><a href="#">Store Location</a></li>
                        <li><a href="#">Orders Tracking</a></li> *@
                        <li><a href="#">My Account</a></li>
                        @* <li><a href="#">Size Guide</a></li> *@
                        <li><a href="#">Faq</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-sm-6 col-md-6 col-lg-3">
                <div class="footer-content">
                    <h3>Information</h3>
                    <ul class="footer-widget">
                        <li><a href="/Dashboard/AboutUs">About Us</a></li>
                        @* <li><a href="#">Delivery System</a></li>
                        <li><a href="#">Secure Payment</a></li> *@
                        <li><a href="/Dashboard/ContactUs">Contact Us</a></li>
                        @* <li><a href="#">Sitemap</a></li> *@
                    </ul>
                </div>
            </div>
            <div class="col-sm-6 col-md-6 col-lg-3">
                <div class="footer-info">
                    <a href="#"><img src="~/images/logo.png" alt="logo"></a>
                    <ul class="footer-count">
                        <li>
                            <h5>929,238</h5>
                            <p>Registered Users</p>
                        </li>
                        <li>
                            <h5>242,789</h5>
                            <p>Community Ads</p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        @* <div class="row">
            <div class="col-lg-12">
                <div class="footer-card-content">
                    <div class="footer-payment">
                        <a href="#"><img src="~/images/pay-card/01.jpg" alt="01"></a>
                        <a href="#"><img src="~/images/pay-card/02.jpg" alt="02"></a>
                        <a href="#"><img src="~/images/pay-card/03.jpg" alt="03"></a>
                        <a href="#"><img src="~/images/pay-card/04.jpg" alt="04"></a>
                    </div>
                    <div class="footer-option">
                        <button type="button" data-toggle="modal" data-target="#language"><i class="fas fa-globe"></i>English</button>
                        <button type="button" data-toggle="modal" data-target="#currency"><i class="fas fa-dollar-sign"></i>USD</button>
                    </div>
                    <div class="footer-app">
                        <a href="#"><img src="~/images/play-store.png" alt="play-store"></a>
                        <a href="#"><img src="~/images/app-store.png" alt="app-store"></a>
                    </div>
                </div>
            </div>
        </div> *@
    </div>
    <div class="footer-end">
        <div class="container">
            <div class="footer-end-content">
                <p>All Copyrights Reserved &copy; 2021 - Developed by <a href="#">IndiaLivings</a></p>
                @* <ul class="footer-social">
                    <li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
                    <li><a href="#"><i class="fab fa-twitter"></i></a></li>
                    <li><a href="#"><i class="fab fa-linkedin-in"></i></a></li>
                    <li><a href="#"><i class="fab fa-google-plus-g"></i></a></li>
                    <li><a href="#"><i class="fab fa-youtube"></i></a></li>
                    <li><a href="#"><i class="fab fa-pinterest-p"></i></a></li>
                    <li><a href="#"><i class="fab fa-instagram"></i></a></li>
                    <li><a href="#"><i class="fab fa-dribbble"></i></a></li>
                </ul> *@
            </div>
        </div>
    </div>
    <div id="toast" class="d-none"></div>
    <div id="spinner" class="d-none">
        <img style="height: 100px" src="~/images/spinner.gif" />
    </div>
</footer>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
    $(document).ready(function () {
        $("#newsForm").on("submit", function (e) {
            e.preventDefault();

            var regex = /^[a-zA-Z0-9._%+-]+@@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            var email = $("#subscriptionEmail").val();
            emailError = document.getElementById('emailError');

            if (email == "") {
                emailError.textContent = "Please enter your mail";
                emailError.style.display = "block";
            }
            else if(!regex.test(email)) {
                emailError.textContent = "Please enter a valid email";
                emailError.style.display = "block";
            }
            else {
                emailError.style.display = "none";
                // const spinner = document.getElementById('spinner');
                // spinner.classList.remove('d-none');

                // $.ajax({
                // url: '@Url.Action("verifyUserName", "Dashboard")',
                // type: 'POST',
                // data: { userName: email }, // Convert email to JSON
                // success: function (response) {

                //     spinner.classList.add('d-none');

                //     if (response.isExist) {
                //         // Properly hide the modal
                //         //$("#forgotPasswordModal").modal("hide");

                //         // Remove the modal backdrop manually (fix for blur effect)
                //         //$(".modal-backdrop").remove();
                //         sendEmail();

                //     } else {
                //             emailError.textContent = "Please enter your registered Email id";
                //             emailError.style.display = "block";
                //     }
                // },
                // error: function () {
                //     spinner.classList.add('d-none');
                // }
            //});
            sendSubscribeEmail();

            }
            // $.ajax({
            //     url: '@Url.Action("SendSubscribeEmail", "Dashboard")',
            //     type: 'POST',
            //     data: email, // Convert email to JSON
            //     success: function (response) {
            //         spinner.classList.add('d-none');

            //         if (response.success) {
            //             // Properly hide the modal
            //             $("#forgotPasswordModal").modal("hide");

            //             // Remove the modal backdrop manually (fix for blur effect)
            //             $(".modal-backdrop").remove();

            //             // Success message
            //             setTimeout(() => {
            //                 alert(response.message);
            //             }, 1000);
            //             } else {
            //                 alert(response.message);
            //             }
            //     },
            //     error: function () {
            //         spinner.classList.add('d-none');
            //         alert("Error sending Email.");
            //     }
            // });
        });
    });

    function sendSubscribeEmail() {

            var UserData = {
                email: $("#subscriptionEmail").val()
            };
            $('#spinner').removeClass('d-none');
            // Send a POST request to the SendEmail action on the server
            $.ajax({
                url: '@Url.Action("SendSubscribeEmail", "Dashboard")',
                type: 'POST',
                data: UserData, // Convert email to JSON
                success: function (response) {
                    $('#spinner').addClass('d-none');

                    if (response.success) {
                        // Properly hide the modal
                        $("#forgotPasswordModal").modal("hide");

                        // Remove the modal backdrop manually (fix for blur effect)
                        $(".modal-backdrop").remove();

                        // Success message
                        setTimeout(() => {
                            alert(response.message);
                        }, 1000);
                        } else {
                            alert(response.message);
                        }
                },
                error: function () {
                    spinner.classList.add('d-none');
                    alert("Error sending Email.");
                }
            });
        };

    function hideEmailError(){
        $("#emailError").hide();
    }
</script>