@model List<IndiaLivings_Web_DAL.Models.BlogModel>

@{
    ViewBag.Title = "Blogs";
}

<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Blogs</title>

    ```
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

    <style>

        body {
            margin: 0;
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto;
            background: linear-gradient(270deg, #fdf4ff, #ede9fe, #e0e7ff);
            background-size: 400% 400%;
            animation: gradientMove 12s ease infinite;
            min-height: 100vh;
            color: #1f2937;
        }

        @@keyframes gradientMove {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .container {
            max-width: 1200px;
            margin: auto;
            padding: 24px;
        }

        /* HERO */
        .blog-hero {
            padding: 80px 0 60px;
            text-align: center;
            position: relative;
        }

            .blog-hero::before,
            .blog-hero::after {
                content: "";
                position: absolute;
                width: 320px;
                height: 320px;
                border-radius: 50%;
                background: radial-gradient(circle, rgba(167,139,250,0.35), transparent 70%);
                filter: blur(60px);
                z-index: 0;
            }

            .blog-hero::before {
                top: -140px;
                left: 10%;
            }

            .blog-hero::after {
                bottom: -140px;
                right: 10%;
            }

            .blog-hero h1 {
                font-size: 48px;
                font-weight: 800;
                color: #4c1d95;
                position: relative;
                z-index: 1;
            }

            .blog-hero p {
                color: #6b7280;
                font-size: 18px;
                position: relative;
                z-index: 1;
            }

        /* SEARCH */
        .hero-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .searchbar {
            width: 420px;
            max-width: 100%;
            padding: 13px 18px;
            border-radius: 999px;
            border: none;
            outline: none;
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(12px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        }

        .write-btn {
            padding: 12px 18px;
            border-radius: 12px;
            border: none;
            background: linear-gradient(135deg,#10b981,#06b6d4);
            color: white;
            font-weight: 600;
            text-decoration: none;
            box-shadow: 0 10px 25px rgba(16,185,129,0.35);
        }

        /* FILTERS */
        .filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 25px;
        }

        .filter-btn {
            padding: 9px 16px;
            border-radius: 999px;
            border: none;
            background: rgba(255,255,255,0.6);
            backdrop-filter: blur(10px);
            cursor: pointer;
            color: #4c1d95;
            font-weight: 600;
            transition: 0.3s;
        }

            .filter-btn.active {
                background: linear-gradient(135deg,#a78bfa,#7c3aed);
                color: white;
            }

        /* GRID */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill,minmax(320px,1fr));
            gap: 30px;
        }

        /* CARD */
        .card {
            background: rgba(255,255,255,0.65);
            backdrop-filter: blur(25px);
            border-radius: 24px;
            overflow: hidden;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.2s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.6);
        }

            .card::before {
                content: "";
                position: absolute;
                inset: 0;
                border-radius: 24px;
                padding: 1px;
                background: linear-gradient(135deg,#c4b5fd,#e9d5ff,#ddd6fe);
                -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
                -webkit-mask-composite: xor;
                mask-composite: exclude;
            }

        .thumb {
            height: 210px;
            overflow: hidden;
        }

            .thumb img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                transition: 0.6s;
            }

        .card:hover img {
            transform: scale(1.12);
        }

        .body {
            padding: 22px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .meta {
            display: flex;
            gap: 10px;
            color: #6b7280;
            font-size: 13px;
        }

        .excerpt {
            color: #4b5563;
            font-size: 14px;
        }

        .read-btn {
            margin-top: auto;
            padding: 11px 18px;
            border-radius: 12px;
            background: linear-gradient(135deg,#a78bfa,#7c3aed);
            color: white;
            text-decoration: none;
            font-weight: 600;
            box-shadow: 0 10px 25px rgba(124,58,237,0.35);
        }

        /* EMPTY */
        .empty {
            grid-column: 1/-1;
            text-align: center;
            padding: 40px;
            background: white;
            border-radius: 16px;
        }

    </style>
    ```

</head>

<body>

    <div class="blog-hero">
        <div class="container">

            <h1>Insights & Stories</h1>
            <p>Latest news, tips, and product updates from our team.</p>

            <div class="hero-actions">
                <input class="searchbar" id="search" placeholder="Search posts..." />
                <a href="@Url.Action("BlogPost", "User")" class="write-btn">
                    <i class="fas fa-plus"></i> Write Post
                </a>
            </div>

        </div>
    </div>

    <div class="container">

        @if (Model != null && Model.Any())
        {
            var categories = Model.Select(m => m.categoryName ?? "General").Distinct().ToList();

            <div class="filters" id="category-filters">
                <button class="filter-btn active" data-cat="">All</button>

                @foreach (var c in categories)
                {
                    <button class="filter-btn" data-cat="@c">@c</button>
                }
            </div>
        }

        <div id="grid" class="grid">

            @if (Model == null || !Model.Any())
            {
                <div class="empty">No blog posts yet.</div>
            }
            else
            {
                foreach (var b in Model)
                {
                    var cat = b.categoryName ?? "General";

                    var hasImage = b.featuredImage != null && b.featuredImage.Length > 0;

                    var imageSrc = hasImage
                    ? $"data:image/png;base64,{Convert.ToBase64String(b.featuredImage)}"
                    : Url.Content("~/images/no-image.png");

                    <div class="card" data-category="@cat">

                        <div class="thumb">
                            <img src="@imageSrc" />
                        </div>

                        <div class="body">

                            <div class="meta">
                                <span>@b.publishedDate.ToString("dd MMM yyyy")</span>
                                <span>•</span>
                                <span>@cat</span>
                            </div>

                            <h3>@b.title</h3>

                            <p class="excerpt">
                                @((b.summary?.Length > 180)
                                                        ? b.summary.Substring(0, 180) + "..."
                                                        : b.summary)
                    </p>

                            <a class="read-btn"
                               href="@Url.Action("Details", "Blog", new { blogId = b.blogId })">
                                Read More
                            </a>

                        </div>
                    </div>
                        }
            }

        </div>
    </div>

    <script>

        /* CATEGORY + SEARCH FILTER */

        let currentCategory = '';

        document.querySelectorAll('#category-filters .filter-btn').forEach(btn => {

            btn.addEventListener('click', function () {

                document.querySelectorAll('#category-filters .filter-btn')
                    .forEach(b => b.classList.remove('active'));

                this.classList.add('active');

                currentCategory = this.getAttribute('data-cat') || '';

                applyFilters();

            });

        });

        document.getElementById('search').addEventListener('input', applyFilters);

        function applyFilters() {

            const q = document.getElementById('search').value.toLowerCase().trim();

            const cards = document.querySelectorAll('#grid .card');

            cards.forEach(card => {

                const title = card.querySelector('h3').textContent.toLowerCase();

                const cat = (card.getAttribute('data-category') || '').toLowerCase();

                const matchesSearch = q === '' || title.includes(q);

                const matchesCategory =
                    currentCategory === '' ||
                    cat === currentCategory.toLowerCase();

                card.style.display =
                    (matchesSearch && matchesCategory) ? '' : 'none';

            });

        }


        /* 3D TILT EFFECT */

        const cards = document.querySelectorAll('.card');

        cards.forEach(card => {

            card.addEventListener('mousemove', (e) => {

                const rect = card.getBoundingClientRect();

                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                const centerX = rect.width / 2;
                const centerY = rect.height / 2;

                const rotateX = -(y - centerY) / 12;
                const rotateY = (x - centerX) / 12;

                card.style.transform =
                    `perspective(1000px)
                     rotateX(${rotateX}deg)
                     rotateY(${rotateY}deg)
                     scale(1.04)`;

            });

            card.addEventListener('mouseleave', () => {

                card.style.transform =
                    `perspective(1000px)
                     rotateX(0deg)
                     rotateY(0deg)
                     scale(1)`;

            });

        });

    </script>
    ```

</body>
</html>
