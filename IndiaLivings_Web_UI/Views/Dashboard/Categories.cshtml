@model IEnumerable<CategoryViewModel>
@using NonFactors.Mvc.Grid;
@{
    ViewBag.Title = "Categories";
}
<style type="text/css">
    body {
        font-family: Arial;
        font-size: 10pt;
    }

    .Grid {
        border: 1px solid #ccc;
        border-collapse: collapse;
        background-color: #fff;
    }

        .Grid th {
            background-color: #B8DBFD;
            color: #333;
            font-weight: bold;
        }

        .Grid th, .Grid td {
            padding: 5px;
            border: 1px solid #ccc;
        }

        .Grid img {
            cursor: pointer;
        }

    .ChildGrid {
        width: 100%;
    }

        .ChildGrid th {
            background-color: #6C6C6C;
            color: #fff;
            font-weight: bold;
        }
</style>

<!--=====================================
    SINGLE BANNER PART START
    =======================================-->
<section class="single-banner">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="single-content">
                    <h2>Categories</h2>
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a asp-controller="Dashboard" asp-action="Dashboard">Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Categoires</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</section>
<!--=====================================
SINGLE BANNER PART END
=======================================-->
<!--=====================================
COMPARE PART START
=======================================-->
<br />
<div class="container">

    <div class="container-fluid">
        
        @(
        Html.Grid(Model).Build(col =>
        {
                col.Add().Titled("Action")
                .Encoded(false)
                .RenderedAs(Model => $@"");
                col.Add().RenderedAs((model, row) => row + 1).Titled("#");
                col.Add(Model => Model.CategoryName).Titled("Category Name").RenderedAs(Model => $@"<image src='' />");
                col.Add(Model => Model.CategoryImage).Titled("Image");
        }))
        @* htmlAttributes: new { @id = "WebGrid", @class = "Grid" },
                     columns: webGrid.Columns(
                     webGrid.Column(null, null, format: @<text><i class="fas fa-greater-than"></i><div style = "display:none" ></div></text>),
                     webGrid.Column("ContactName", "Contact Name"),
                     webGrid.Column("City", "City"),
                     webGrid.Column(format: (item) =>
                     {
                         WebGrid childGrid = new WebGrid(source: item.Orders, canSort: false, canPage: false);
                         return childGrid.GetHtml(
                         htmlAttributes: new { @class = "ChildGrid" },
                         columns: childGrid.Columns(
                         childGrid.Column("OrderId", "OrderId"),
                         childGrid.Column("OrderDate", "OrderDate")
                         ));
                     })
                     )) *@
     </div>
</div>

<script src="~/js/mvc-grid/mvc-grid.js"></script>

<script type="text/javascript">

    document.querySelectorAll(".mvc-grid").forEach(element => new MvcGrid(element));
        $(function () {
            //Loop through all Child Grids.
            $("#WebGrid .ChildGrid").each(function () {
                //Copy the Child Grid to DIV.
                var childGrid = $(this).clone();
                $(this).closest("TR").find("TD").eq(0).find("DIV").append(childGrid);

                //Remove the Last Column from the Row.
                $(this).parent().remove();
            });

        //Remove Last Column from Header Row.
        $("#WebGrid TH:last-child").eq(0).remove();
                    });
        //Assign Click event to Plus Image.
        $("body").on("click", "img[src*='plus.png']", function () {
            $(this).closest("tr").after("<tr><td></td><td colspan = '999'>" + $(this).next().html() + "</td></tr>");
        $(this).attr("src", "/images/minus.png");
                    });
        //Assign Click event to Minus Image.
        $("body").on("click", "img[src*='minus.png']", function () {
            $(this).attr("src", "/images/plus.png");
        $(this).closest("tr").next().remove();
                    });
</script>
<!--=====================================
            JS LINK PART END
=======================================-->
